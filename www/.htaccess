RewriteEngine on

# handle requests for site pages like http://www.domain.com/pagename.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.php$ pagehandler.php?url=$1 [L,QSA]

# handle requests for cmspages http://www.domain.com/login/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ cmshandler.php?url=$1 [L,QSA]

# default page
RewriteRule ^$ pagehandler.php?url=index [L]